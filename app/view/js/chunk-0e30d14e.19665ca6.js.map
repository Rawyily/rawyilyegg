{"version":3,"sources":["webpack:///./src/network/setimg.js","webpack:///./src/views/administrator/UploadRecommendImg.vue?2189","webpack:///./src/views/administrator/UploadRecommendImg.vue","webpack:///./src/views/administrator/UploadRecommendImg.vue?6dc2","webpack:///./node_modules/core-js/modules/es.json.stringify.js"],"names":["setproject","data","console","log","request","url","method","setslideshow","setrecommend","cookie","document","cookies","headers","Cookies","files","ref","addbutton","undefined","inputfilemouse","i","value","imgsrc","getimgfile","Date","imgbutton","imgfile","setfromfile","readfile","FileReader","readAsDataURL","onload","result","setTimeout","imgdata","Image","src","w","width","h","height","img","wh","warnpx","imgok","type","warntype","clearimg","radio","link","loaddata","recommendnum","datastring","JSON","stringify","formData","FormData","append","then","res","openclear","msg","catch","err","open","b","ElMessageBox","alert","confirmButtonText","callback","onMounted","__exports__","$","global","getBuiltIn","apply","uncurryThis","fails","Array","$stringify","exec","charAt","charCodeAt","replace","numberToString","toString","tester","low","hi","fix","match","offset","string","prev","next","FORCED","target","stat","forced","it","replacer","space","l","arguments","length","args"],"mappings":"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","file":"js/chunk-0e30d14e.19665ca6.js","sourcesContent":["import { request } from 'network/request';\r\nexport function setproject(data) {\r\n    console.log(data);\r\n    return request({\r\n        url: 'api/setimgproject',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\nexport function setslideshow(data) {\r\n    console.log(data);\r\n    return request({\r\n        url: 'api/setslideshow',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\nexport function setrecommend(data,cookie) {\r\n    console.log(data);\r\n    document.cookie = 'numAndLink=' + cookie;\r\n    const cookies = document.cookie;\r\n    return request({\r\n        url: 'api/setrecommend',\r\n        method: 'post',\r\n        headers: { Cookies:cookies },\r\n        data\r\n    })\r\n} ","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UploadRecommendImg.vue?vue&type=style&index=0&id=403b6e88&lang=scss&scoped=true\"","<template>\r\n<div class=\"box\">\r\n    <div class=\"header\">更新推荐栏</div>\r\n    <div style=\"height:20vh;\"></div>\r\n    <div class=\"loadbox\">\r\n        <div class=\"bl\">\r\n            <div v-if=\"imgbutton\" class=\"addbutton\" :style=\"addbutton\"></div>\r\n            <input v-if=\"imgbutton\" @change=\"getimgfile()\" class=\"inputfile\" type=\"file\" ref=\"files\" @mousemove=\"inputfilemouse(true)\" @mouseout=\"inputfilemouse(false)\">\r\n            <div v-if=\"!imgbutton\" class=\"imgbox\"><img :src=\"imgsrc\" alt=\"\" srcset=\"\"></div>\r\n            <div v-if=\"!imgbutton\" @click=\"clearimg()\" class=\"guanbiimg\">X</div>\r\n        </div>\r\n        <div v-if=\"imgbutton\" class=\"br\">\r\n            <h4 style=\"text-align: center;margin-top:115px\">要求</h4>\r\n            <p style=\"text-align: center;margin-top:10px\">260px*206px的ipg或png图片</p>\r\n        </div>\r\n        <div v-if=\"!imgbutton\" class=\"br\">\r\n            <div class=\"imgtype\" :style=\"warntype\">图片类型：{{img.type}}</div>\r\n            <div :style=\"warnpx\">图片尺寸：{{img.wh}}</div>\r\n        </div>\r\n        <!-- ele单选框 -->\r\n        <div v-if=\"!imgbutton\" class=\"selectelenum\">\r\n        <el-radio-group v-model=\"radio\">\r\n            <el-radio :label=\"1\">推荐 1</el-radio>\r\n            <el-radio :label=\"2\">推荐 2</el-radio>\r\n            <el-radio :label=\"3\">推荐 3</el-radio>\r\n            <el-radio :label=\"4\">推荐 4</el-radio>\r\n            <el-radio :label=\"5\">推荐 5</el-radio>\r\n        </el-radio-group>\r\n        </div>\r\n\r\n        <div v-if=\"!imgbutton\" class=\"linkinput\">\r\n        <el-input v-model=\"link\" minlength=\"1\" maxlength=\"50\" placeholder=\"项目链接\" />\r\n        </div>\r\n\r\n        <div v-if=\"!imgbutton\" class=\"loadbutton\">\r\n            <el-row class=\"mb-4\">\r\n                <el-button @click=\"loaddata()\" type=\"primary\" round>上传更新</el-button>\r\n            </el-row>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n</template>\r\n<script setup>\r\n// toRefs defineProps() useSlots()\r\n// useAttrs() defineEmits() defineExpose()\r\n//  console.log(child.value.msg); // Child Components\r\nimport {onMounted,ref} from 'vue';\r\nvar files = ref(null);\r\nvar addbutton = ref(undefined);\r\nconst inputfilemouse = (i)=>{\r\n    if (i) {\r\n      addbutton.value = \"opacity: 1;\"  \r\n    } else {\r\n      addbutton.value = '';  \r\n    }\r\n    \r\n}\r\nvar imgsrc = ref();\r\nconst getimgfile = ()=>{\r\n    console.log(new Date());\r\n    // 切换\r\n    imgbutton.value = false;\r\n    // 显示图片\r\n    var imgfile = files.value.files[0];\r\n    setfromfile.value = files.value.files[0];\r\n    console.log(imgfile);\r\n    var readfile = new FileReader;\r\n    readfile.readAsDataURL(imgfile);\r\n    readfile.onload = ()=>{\r\n        imgsrc.value = readfile.result;\r\n        //显示图片尺寸\r\n        setTimeout(()=>{\r\n            var imgdata = new Image();\r\n            imgdata.src = imgsrc.value;\r\n            imgdata.onload = ()=>{\r\n                const w = imgdata.width;\r\n                const h = imgdata.height;\r\n                if (w == 260 && h == 206) {\r\n                    img.value.wh = \"260*206 (正确)\";\r\n                    warnpx.value = \"\";\r\n                    imgok.value[0] = true;\r\n                } else {\r\n                    img.value.wh = w+'px*'+h+'px (错误)';\r\n                    warnpx.value = \"color:red;\";\r\n                    imgok.value[0] = false;\r\n                }\r\n            }\r\n        },500);\r\n        //显示图片格式\r\n        if (imgfile.type == \"image/png\" | imgfile.type == \"image/jpg\" | imgfile.type == \"image/jpeg\") {\r\n            img.value.type = imgfile.type + \" (正确)\";\r\n            warntype.value = \"\";\r\n            imgok.value[1] = true;\r\n        } else {\r\n            img.value.type = imgfile.type + \" (错误)\";\r\n            warntype.value = \"color:red;\";\r\n            imgok.value[1] = false;\r\n        }\r\n    }\r\n}\r\nvar warntype = ref();\r\nvar warnpx = ref();\r\nvar imgbutton = ref(true);\r\nconst clearimg = ()=>{\r\n    imgsrc.value = undefined;\r\n    imgbutton.value = true;\r\n    warntype.value = undefined;\r\n    warnpx.value = undefined;\r\n    radio.value = undefined;\r\n    link.value = undefined;\r\n    addbutton.value = \"opacity: 1;\" \r\n}\r\nconst img = ref({type:undefined,wh:undefined});\r\nvar radio = ref();\r\nvar link = ref();\r\nvar imgok = ref([undefined,undefined]); \r\nimport {setrecommend} from 'network/setimg';\r\nvar setfromfile = ref();\r\nconst loaddata = ()=>{\r\n    console.log('files.value');\r\n    console.log(setfromfile.value);\r\n    // console.log(imgok.value);\r\n    // console.log(radio.value);\r\n    // console.log(link.value);\r\n    if (imgok.value[0] && imgok.value[0]) {\r\n        if (radio.value) {\r\n            if (link.value) {\r\n                const data = {\r\n                    recommendnum:radio.value,\r\n                    link:link.value\r\n                }\r\n                console.log(data);\r\n                const datastring = JSON.stringify(data);\r\n                const formData = new FormData();\r\n                formData.append('file',setfromfile.value);\r\n                    setrecommend(formData,datastring).then(res=>{\r\n                        openclear(res.data.msg);\r\n                    }).catch(err=>{\r\n                        open(err)\r\n                    })        \r\n            } else {\r\n                open('请填写推荐图对应的链接')\r\n            }\r\n        } else {\r\n        open('请选择要更新的推荐图选项')\r\n            \r\n        }\r\n    } else {\r\n        open('图像格式有误')\r\n    }\r\n}\r\nimport { ElMessageBox } from 'element-plus';\r\nconst open = (b) => {\r\n  ElMessageBox.alert(b, '提示', {\r\n    confirmButtonText: '知道了',\r\n    callback: () => {\r\n    },\r\n  })\r\n}\r\nconst openclear = (b) => {\r\n  ElMessageBox.alert(b, '提示', {\r\n    confirmButtonText: '知道了',\r\n    callback: () => {\r\n        clearimg()\r\n    },\r\n  })\r\n}\r\nonMounted(() => {\r\n\r\n})\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n*{z-index: 0;}\r\nhtml{\r\n    width: 90vw;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n}\r\n.box{\r\n\r\n    .header{\r\n        width: 90vw;\r\n        height: 30px;\r\n        text-align: center;\r\n        line-height: 30px;\r\n        color: rgb(22, 0, 41);\r\n        font-weight:bold;\r\n        background-color: rgb(190, 190, 190);\r\n        margin: auto;\r\n    }\r\n    .loadbox{\r\n        width: 650px;\r\n        height: 450px;\r\n        background-color: rgb(255, 255, 255);\r\n        margin: auto;\r\n        position: relative;\r\n        \r\n        .bl{\r\n            width: 300px;\r\n            height: 300px;\r\n            padding: 5px;\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            .inputfile{\r\n                position: absolute;\r\n                top: 140px;\r\n                left: 125px;\r\n                // transform:rotate(45deg);\r\n                opacity: 0;\r\n            }\r\n            .addbutton{\r\n                width: 50px;\r\n                height: 50px;\r\n                background-color: rgb(0, 0, 0);\r\n                position: absolute;\r\n                top: 125px;\r\n                left: 125px;\r\n                background-image: url('../../assets/img/iconAdd.jpg');\r\n                border-radius: 25px;\r\n                opacity: 0.7;\r\n            }\r\n            .guanbiimg{\r\n                width: 30px;\r\n                height: 30px;\r\n                line-height: 30px;\r\n                text-align:center;\r\n                font-size: 26px;\r\n                color: rgb(255, 0, 0);\r\n                background-color: #fff;\r\n                position: absolute;\r\n                bottom: 241px;\r\n                left: 255px;\r\n            }\r\n            .guanbiimg:hover{\r\n                color: rgb(255, 0, 0);\r\n                background-color: rgba(238, 255, 0, 0.788);\r\n            }\r\n            .imgbox{\r\n                width: 260px;\r\n                height: 206px;\r\n                border: 10px solid rgb(255, 255, 255);\r\n                background-color: #fff;\r\n                position: absolute;\r\n                bottom: 15px;\r\n                left: 15px;\r\n                overflow: hidden;\r\n            }\r\n        }\r\n        .br{\r\n            width: 300px;\r\n            height: 300px;\r\n            padding: 5px;\r\n            position: absolute;\r\n            // background-color: rgb(160, 160, 160);\r\n            top: 0;\r\n            right: 0;\r\n            .imgtype{margin-top:120px}\r\n        }\r\n        .selectelenum{\r\n            text-align: center;\r\n            position: relative;\r\n            top: 310px;\r\n        }\r\n        .linkinput{\r\n            position: relative;\r\n            top: 310px;\r\n            width: 580px;\r\n            margin: auto;\r\n        }\r\n        .loadbutton{\r\n            position: absolute;\r\n            bottom: 5px;\r\n            left: 281px;\r\n        }\r\n    }\r\n}\r\n\r\n</style>","import script from \"./UploadRecommendImg.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UploadRecommendImg.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UploadRecommendImg.vue?vue&type=style&index=0&id=403b6e88&lang=scss&scoped=true\"\n\nimport exportComponent from \"Z:\\\\rawyily.com\\\\rawyilyhome\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-403b6e88\"]])\n\nexport default __exports__","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\n\nvar Array = global.Array;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar exec = uncurryThis(/./.exec);\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar replace = uncurryThis(''.replace);\nvar numberToString = uncurryThis(1.0.toString);\n\nvar tester = /[\\uD800-\\uDFFF]/g;\nvar low = /^[\\uD800-\\uDBFF]$/;\nvar hi = /^[\\uDC00-\\uDFFF]$/;\n\nvar fix = function (match, offset, string) {\n  var prev = charAt(string, offset - 1);\n  var next = charAt(string, offset + 1);\n  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {\n    return '\\\\u' + numberToString(charCodeAt(match, 0), 16);\n  } return match;\n};\n\nvar FORCED = fails(function () {\n  return $stringify('\\uDF06\\uD834') !== '\"\\\\udf06\\\\ud834\"'\n    || $stringify('\\uDEAD') !== '\"\\\\udead\"';\n});\n\nif ($stringify) {\n  // `JSON.stringify` method\n  // https://tc39.es/ecma262/#sec-json.stringify\n  // https://github.com/tc39/proposal-well-formed-stringify\n  $({ target: 'JSON', stat: true, forced: FORCED }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      for (var i = 0, l = arguments.length, args = Array(l); i < l; i++) args[i] = arguments[i];\n      var result = apply($stringify, null, args);\n      return typeof result == 'string' ? replace(result, tester, fix) : result;\n    }\n  });\n}\n"],"sourceRoot":""}